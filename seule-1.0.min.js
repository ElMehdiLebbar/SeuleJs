"use strict";function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!_instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var S=function(e){return new Seule(e)},Seule=function(){function e(t){_classCallCheck(this,e),this.check=!0,"document"===t?this.element=[document]:"window"===t?this.element=[window]:"object"===_typeof(t)?this.element=t:this.element=document.querySelectorAll(t),this.tags=this.element,this.tags.length&&(this.tags=this.element[0]),this.selector=t}return _createClass(e,[{key:"find",value:function(t){return"object"===_typeof(t)?new e(t):new e(this.selector+" "+t)}},{key:"children",value:function(t){var n=this.tags.children;return t?"last"===t.toString().toLowerCase()?new e(n[n.length-1]):"first"===t.toString().toLowerCase()?new e(n[0]):new e(n[t-1]):new e(n)}},{key:"parrent",value:function(){return new e(this.tags.parentElement)}},{key:"each",value:function(e){if(null==this.element.length)e.call(this.element);else{var t=!0,n=!1,r=void 0;try{for(var i,o=this.element[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.call(a)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}return this}},{key:"on",value:function(t,n){return this.each(function(){this.addEventListener(t,function(){n(new e(this),this)},!1)})}},{key:"click",value:function(e){this.on("click",function(t){e(t)})}},{key:"focus",value:function(e){return this.tags.focus(),this.tags}},{key:"blur",value:function(e){return this.tags.blur(),this.tags}},{key:"hold",value:function(e){var t=null,n="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,r=n?"touchstart":"mousedown",i=n?"touchend":"mouseup",o=n?"touchmove":"mousemove",a=0,u=0,l=10,s=10;function c(e){f(e);var r=e.target,o=parseInt(r.getAttribute("data-long-press-delay")||"1500",10);t=function(e,t){if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(e,t);var n=(new Date).getTime(),r={};return r.value=requestAnimFrame(function i(){(new Date).getTime()-n>=t?e.call():r.value=requestAnimFrame(i)}),r}(function(e){f();var t=n?e.touches[0].clientX:e.clientX,r=n?e.touches[0].clientY:e.clientY;this.dispatchEvent(new CustomEvent("long-press",{bubbles:!0,cancelable:!0,detail:{clientX:t,clientY:r}}))&&document.addEventListener(i,function e(t){document.removeEventListener(i,e,!0),function(e){e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation()}(t)},!0)}.bind(r,e),o)}function f(e){var n;(n=t)&&(window.cancelAnimationFrame?window.cancelAnimationFrame(n.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(n.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(n.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(n.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(n.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(n.value):clearTimeout(n)),t=null}return"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},window.CustomEvent.prototype=window.Event.prototype),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},document.addEventListener(i,f,!0),document.addEventListener(o,function(e){var t=Math.abs(a-e.clientX),n=Math.abs(u-e.clientY);(t>=l||n>=s)&&f()},!0),document.addEventListener("wheel",f,!0),document.addEventListener("scroll",f,!0),document.addEventListener(r,function(e){a=e.clientX,u=e.clientY,c(e)},!0),this.on("long-press",function(t){e(t)}),this}},{key:"swipe",value:function(t,n){var r,i,o=this.element;return o[0].addEventListener("touchstart",function(e){r=e.touches[0].clientX,i=e.touches[0].clientY},!1),o[0].addEventListener("touchmove",function(o){if(!r||!i)return;var a=o.touches[0].clientX,u=o.touches[0].clientY,l=r-a,s=i-u;if(Math.abs(l)>Math.abs(s)){if(l>0){if("left"!==t)return!1;n(new e(this),this)}else if(l<0){if("right"!==t)return!1;n(new e(this),this)}}else if(s>0){if("top"!==t)return!1;n(new e(this),this)}else if(s<0){if("bottom"!==t)return!1;n(new e(this),this)}r=null,i=null},!1),this}},{key:"hotKey",value:function(t,n,r){var i="",o={Arrow:"",Control:"ctrl"},a=t.replace(/\s/g,"");return this.each(function(){var t=this;r&&(t=window),t.addEventListener("keydown",function(t){i=(i+=t.key).replace(/Arrow|Control/gi,function(e){return o[e]}),i.toLowerCase().indexOf(a.toLowerCase())>-1&&(n(new e(this),this),i=""),setInterval(function(){return i=""},5e3)},!0)})}},{key:"emit",value:function(e){var t=document.querySelector(e.target);return this.on(e.event,function(){var n=new MouseEvent(e.emit,{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(n)}),this}},{key:"toggle",value:function(e){var t=!0;return this.on(e.event,function(n){!0===t?(e.handler(n),t=!1):(e.callback(n),t=!0)}),this}},{key:"scroll",value:function(){return this.tags.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),this}},{key:"scrollPosition",value:function(e){var t=this.tags;return e?t.pageXOffset||t.scrollLeft:t.pageYOffset||t.scrollTop}},{key:"width",value:function(e){return e?this.each(function(){this.style.width=e}):getComputedStyle(this.tags).width}},{key:"height",value:function(e){return e?this.each(function(){this.style.height=e}):getComputedStyle(this.tags).height}},{key:"addClass",value:function(e){return this.each(function(){this.classList.add(e)})}},{key:"removeClass",value:function(e){return this.each(function(){this.classList.remove(e)})}},{key:"toggleClass",value:function(e){return this.each(function(){this.classList.toggle(e)})}},{key:"hasClass",value:function(e){if(this.tags.className.match("(?:^|\\s)"+e+"(?!\\S)"))return!0}},{key:"style",value:function(e,t){return this.each(function(){this.style[e]=t})}},{key:"css",value:function(t){var n=e.objectToStyle(t);return this.each(function(){this.setAttribute("style",n)})}},{key:"getStyle",value:function(e){return getComputedStyle(this.tags)[e]}},{key:"classList",value:function(){for(var e=[],t=0;t<this.tags.classList.length;t++)e.push(this.tags.classList.item(t));return e}},{key:"classListContains",value:function(e){return this[0].classList.contains(e)}},{key:"show",value:function(){return this.each(function(){this.getAttribute("style").includes("display: none")?this.style.display="":this.style.display="inherit"})}},{key:"hide",value:function(){return this.each(function(){this.style.display="none"})}},{key:"visible",value:function(e){return this.each(function(){this.style.visibility=e?"hidden":"visible"})}},{key:"isVisible",value:function(){var e=!0;return"hidden"===this.tags.style.visibility&&(e=!1),e}},{key:"opacity",value:function(e){return this.each(function(){this.style.opacity=e})}},{key:"anime",value:function(t){for(var n=Object.keys(t),r=this.tags,i={},o={},a={},u={},l={},s=0,c=n;s<c.length;s++){var f=c[s],h=t[f].delay||"0s",y=t[f].duration||"0.1s";if("type"!=f&&"direction"!=f){var d=getComputedStyle(r);i[f]=y+" "+h,o[f]=t[f].value||"inherit",u===l&&(u[f]=d[f]||"inherit"),a[f]=parseFloat(h.replace(/s/g,""))+parseFloat(y.replace(/s/g,""))}}o.transition=e.objectToStyle(i).replace(/:/g," ").replace(/;/g,", "),o["transition-timing-function"]=t.type||"ease",u.transition=o.transition,u["transition-timing-function"]=o["transition-timing-function"],u===l&&(l=u);var v=Object.values(a);return a=1e3*Math.max.apply(Math,_toConsumableArray(v)),this.each(function(){var n=this,r=t.timeOut||100,i=2*parseInt(a+r)+100;if(t.direction||t.loop){s(a+r);var l=setInterval(function(){s(a+r)},i);t.direction&&clearInterval(l)}else n.setAttribute("style",e.objectToStyle(o));function s(t){n.setAttribute("style",e.objectToStyle(o)),setTimeout(function(){n.setAttribute("style",e.objectToStyle(u))},parseInt(t))}})}},{key:"text",value:function(e){return e||""===e?this.each(function(){this.innerText=e}):this.tags.innerText}},{key:"val",value:function(e){return e||""===e?this.each(function(){this.value=e}):this.tags.value}},{key:"attr",value:function(e,t){return t?this.each(function(){this.setAttribute(e,t)}):this.tags.getAttribute(e)}},{key:"html",value:function(e){return e||""===e?this.each(function(){this.innerHTML=e}):this.tags.innerHTML}},{key:"append",value:function(t,n){var r=e.hTmlplace("beforeend",n);return this.each(function(){this.insertAdjacentHTML(r,t)})}},{key:"insertHtml",value:function(t,n){var r=e.hTmlplace("afterend",n);return this.each(function(){this.insertAdjacentHTML(r,t)})}}],[{key:"http",value:function(e){var t,n,r=new XMLHttpRequest;return e.data&&(n=this.objectToUrlQuery(e.data)),new Promise(function(i,o){r.open(e.method||"GET",e.url,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(n),r.onreadystatechange=function(){4==this.readyState&&200==this.status&&(e.json?(t=JSON.parse(this.responseText),i(t)):(t=this.responseText,i(t)))},r.onerror=function(){return o(r.statusText)},r.onloadend=function(){404==r.status&&i("broken link")}})}},{key:"get",value:function(t){return e.http({url:t})}},{key:"getJson",value:function(t){return e.http({url:t,json:!0})}},{key:"post",value:function(t,n){return e.http({url:t,method:"POST",data:n})}},{key:"storage",value:function(e,t){return window.localStorage.setItem(e,JSON.stringify(t)),this}},{key:"getStorage",value:function(e){return JSON.parse(window.localStorage.getItem(e))}},{key:"storageDelete",value:function(e){return window.localStorage.removeItem(e),this}},{key:"storageClear",value:function(){return window.localStorage.clear(),this}},{key:"loop",value:function(t){return"object"!==_typeof(t.obj)?e.getJson(t.obj).then(function(e){t.obj=e,[].forEach.call(t.obj,t.handler)}):[].forEach.call(t.obj,t.handler),t}},{key:"sortByProperty",value:function(e){return function(t,n){return t[e]>n[e]?1:t[e]<n[e]?-1:0}}},{key:"hTmlplace",value:function(e,t){switch(!0){case"top"===t:e="afterbegin";break;case"before"===t:e="beforebegin";break;case null==t&&"afterend"===e:e="afterend";break;default:e="beforeend"}return e}},{key:"objectToUrlQuery",value:function(e){return("'"+Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")+"'").slice(1).slice(0,-1)}},{key:"objectToStyle",value:function(t){return e.objectToUrlQuery(t).replace(/&/g,";").replace(/=/g,":")}},{key:"audioPlay",value:function(e,t){var n=new Audio(e);return this.delay=t,setTimeout(function(){n.pause(),n.play()},t),n}},{key:"audioPauseIn",value:function(e,t){return setTimeout(function(){e.pause(),e.currentTime=0},t+this.delay),this}},{key:"increaseDate",value:function(e){var t=new Date(e.date),n=new Date(t.setMonth(t.getMonth()+parseInt(e.step))),r=n.getMonth()+1;if(e.prefix){if("day"===e.prefix.toLowerCase()){var i=new Date(e.date);return i.setDate(i.getDate()+parseInt(e.step)),i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2)}return(r=t.getFullYear()+1)+"-"+("0"+t.getMonth()).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}return n.getFullYear()+"-"+("0"+r).slice(-2)+"-"+("0"+n.getDate()).slice(-2)}},{key:"ifDateBetween",value:function(e){var t=e.from.split(e.character||"/"),n=e.to.split(e.character||"/"),r=e.value.split(e.character||"/");return e.from=new Date(t[2],parseInt(t[1])-1,t[0]),e.to=new Date(n[2],parseInt(n[1])-1,n[0]),e.value=new Date(r[2],parseInt(r[1])-1,r[0]),e.value>e.from&&e.value<e.to?(e.handler&&e.handler(),!0):(e.callback&&e.callback(),!1)}},{key:"select",value:function(e){var t=_toConsumableArray(e.obj);return e.column?t.filter(function(t){return e.value.indexOf(t[e.column])>=0}):e.query?t.filter(function(t){return e.query(t)}):t.filter(function(t){for(var n in t)if(JSON.stringify(t[n]).toString().toLowerCase().indexOf(e.value.toString().toLowerCase())>-1)return t})}},{key:"nest",value:function(e){return e.obj.filter(function(t){if(t[e.child]&&"object"==_typeof(t[e.child]))return t[e.child].some(function(t){return e.query(t)})})}},{key:"delete",value:function(t){return e.select({obj:t.obj,query:function(e){return t.query(e)}}).forEach(function(e){return t.obj.splice(t.obj.findIndex(function(t){return t===e}),1)}),t.obj}},{key:"insert",value:function(e){return e.obj.push(e.item),this}},{key:"update",value:function(t){var n=e.select({obj:t.obj,query:function(e){return t.query(e)}}),r=Object.keys(t.item);return n.forEach(function(e){return t.obj.findIndex(function(n){if(n===e){var i=!0,o=!1,a=void 0;try{for(var u,l=r[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;n[s]=t.item[s]}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}})}),t.obj}},{key:"alter",value:function(e){return e.obj.map(function(t){var n=t;if(null==e.columns){var r=e.query.split(" ");n[r[4]]=n[r[2]],delete n[r[2]]}if("drop"===e.query.toLowerCase())for(var i=0;i<e.columns.length;i++)delete n[e.columns[i]];if("add"===e.query.toLowerCase())for(var o=0;o<e.columns.length;o++)n.hasOwnProperty(e.columns[o])||(n[e.columns[o]]="");return n})}},{key:"group",value:function(e){return e.group=_toConsumableArray(new Set(e.obj.reduce(function(t,n){return t.concat(n[e.property])},[]))),e.query&&[].forEach.call(e.group,e.query),e.group}},{key:"sum",value:function(t){var n=t.obj;return t.query&&(n=e.select({obj:t.obj,query:function(e){return t.query(e)}})),n.reduce(function(e,t){return Object.keys(t).reduce(function(e,n){return"id"===n||(e[n]=(e[n]||0)+ +t[n]),e},e)},{})}},{key:"sumNest",value:function(t){var n=[],r=e.nest({obj:t.obj,child:t.child,handler:function(e){n.push(e)}});return r=n,t.query&&(r=e.select({obj:n,query:function(e){return t.query(e)}})),e.sum({obj:r})}},{key:"fetch",value:function(t){var n=document.querySelectorAll(t.selector),r="",i=t.obj;t.query&&(i=t.child?e.nest({obj:t.obj,child:t.child,query:function(e){return t.query(e)}}):e.select({obj:t.obj,query:function(e){return t.query(e)}})),e.loop({obj:i,handler:function(e,n){var o=i.length;t.limit&&(o=t.limit-1),o>=n&&(r+=t.template(e,n))}});var o=!0,a=!1,u=void 0;try{for(var l,s=n[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){l.value.innerHTML=r}}catch(e){a=!0,u=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw u}}return t.handler(new e(t.selector),n),this}},{key:"fetchFrom",value:function(t){return e.getJson(t.url).then(function(n){e.fetch({obj:n,child:t.child||null,limit:t.limit||null,selector:t.selector,query:function(e){return t.query(e)||null},template:function(e){return t.template(e)}});var r=document.querySelectorAll(t.selector);t.handler(new e(t.selector),r)}),this}},{key:"load",value:function(t){var n=document.querySelectorAll(t.selector);return e.get(t.url).then(function(r){var i=!0,o=!1,a=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){u.value.innerHTML=r}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}t.handler(new e(t.selector),n)}),this}},{key:"setHtmlMethod",value:function(t){var n=document.querySelectorAll(t.selector+" *");return e.loop({obj:n,handler:function(n){if(n.getAttribute("@"+t.attr)){var r=n.getAttribute("@"+t.attr).split("{"),i="{"+r[1].slice(0,-1)+"}";i=i.replace(/[~']/g,'"').replace(/[~`]/g,'"'),i=JSON.parse(i),r[0]?n.addEventListener(r[0],function(){t.handler(i,new e(n),n)},!1):t.handler(i,new e(n),n)}}}),t.elements=new e(t.selector),t.es=n,this}},{key:"scrollTop",value:function(){return window.scrollTo({top:0,behavior:"smooth"}),this}},{key:"scrollBottom",value:function(){return window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),this}},{key:"orientation",value:function(){return"90"==screen.orientation.angle?"Horizontally":"Vertically"}},{key:"screen",value:function(e,t,n){var r=window.matchMedia(e),i=o(r);function o(e){return e.matches?"function"==typeof t&&t():"function"==typeof n&&n(),e}return r.addEventListener("change",o),i}},{key:"sceneHandler",value:function(e){return window.addEventListener("scroll",function(){!function(e){var t=document.querySelector(e.selector),n=e.unit||"percent",r=e.distance,i=window.innerHeight||document.documentElement.clientHeight,o=t.getBoundingClientRect().top,a=Math.round(o/i*100),u=Math.round(o);("percent"==n?a:u)<=r?e.handler():e.callback&&e.callback()}(e)},!1),this}},{key:"scene",value:function(t){var n=0;return e.sceneHandler({selector:t.selector||"body",distance:t.distance||0,unit:t.unit||"percent",handler:function(){0===n&&(t.handler(),n=1)},callback:function(){1===n&&t.callback&&(t.callback(),n=0)}}),this}}]),e}();