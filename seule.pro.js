"use strict";class Seule{constructor(e,t,n){this.el=e,this.element="window"===e?[window]:"object"==typeof e?e:document.querySelectorAll(e),this.tags=this.element,this.tags.length&&(this.tags=this.element[0]),this.selector=e,this.check=!0,this.cont=!0,this.root=t,"object"==typeof t&&(this.parrent=t),this.children=!1;let i=this.children;this.render=function(){let t=this.tags;customElements.define("seule-"+e.replace("#",""),class extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"closed"});if("object"==typeof n){let t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",n[0]+".css"),e.appendChild(t)}else{let t=document.createElement("style");t.textContent=n,e.appendChild(t)}let s=t.cloneNode(!0);t.innerHTML="",e.appendChild(s),i=new Seule(e.children)}});let s=document.createElement("seule-"+e.replace("#",""));t.appendChild(s)},t&&"object"!=typeof t&&(this.render(),this.children=i,console.log("%cDon't try anything cute,\n%cDom is Protected! ðŸ˜¡","color: gray; font-size:15px;","color: red; font-size:38px;"))}Find(e){return this.root?(this.tags=this.children.element[1].querySelectorAll(e),this.el=e,new Seule(this.tags,this.children.element[1])):new Seule("object"==typeof e?e:this.el+" "+e)}Children(e){let t=this.tags.children;return e?"last"===e.toString().toLowerCase()?new Seule(t[t.length-1]):"first"===e.toString().toLowerCase()?new Seule(t[0]):new Seule(t[e-1]):new Seule(t)}Parent(){return new Seule(this.tags.parentElement)}Each(e){if(null==this.element.length)e.call(this.element);else for(const t of this.element)e.call(t);return this}On(e,t){return this.Each(function(){this.addEventListener(e,()=>t(new Seule(this),this),!1)})}Click(e){return this.On("click",t=>e(t))}Focus(e){return e?this.On("focus",t=>e(t)):(this.tags.focus(),this.tags)}Blur(e){return e?this.On("blur",t=>e(t)):(this.tags.blur(),this.tags)}Hold(e){let t=null,n="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,i=n?"touchstart":"mousedown",s=n?"touchend":"mouseup",o=n?"touchmove":"mousemove",r=0,l=0,a=10,c=10;function u(e){d(e);let i=e.target,o=parseInt(i.getAttribute("data-long-press-delay")||"1500",10);t=function(e,t){if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(e,t);let n=(new Date).getTime(),i={},s=function(){(new Date).getTime()-n>=t?e.call():i.value=requestAnimFrame(s)};return i.value=requestAnimFrame(s),i}(function(e){d();let t=n?e.touches[0].clientX:e.clientX,i=n?e.touches[0].clientY:e.clientY;this.dispatchEvent(new CustomEvent("long-press",{bubbles:!0,cancelable:!0,detail:{clientX:t,clientY:i}}))&&document.addEventListener(s,function e(t){document.removeEventListener(s,e,!0),function(e){e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation()}(t)},!0)}.bind(i,e),o)}function d(e){var n;(n=t)&&(window.cancelAnimationFrame?window.cancelAnimationFrame(n.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(n.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(n.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(n.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(n.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(n.value):clearTimeout(n)),t=null}return"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};let n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},window.CustomEvent.prototype=window.Event.prototype),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},document.addEventListener(s,d,!0),document.addEventListener(o,function(e){let t=Math.abs(r-e.clientX),n=Math.abs(l-e.clientY);(t>=a||n>=c)&&d()},!0),document.addEventListener("wheel",d,!0),document.addEventListener("scroll",d,!0),document.addEventListener(i,function(e){r=e.clientX,l=e.clientY,u(e)},!0),this.On("long-press",t=>e(t)),this}Swipe(e,t){let n,i,s=this.element;return s[0].addEventListener("touchstart",function(e){n=e.touches[0].clientX,i=e.touches[0].clientY},!1),s[0].addEventListener("touchmove",function(s){if(!n||!i)return;let o=s.touches[0].clientX,r=s.touches[0].clientY,l=n-o,a=i-r;if(Math.abs(l)>Math.abs(a)){if(l>0){if("left"!==e)return!1;t(new Seule(this),this)}else if(l<0){if("right"!==e)return!1;t(new Seule(this),this)}}else if(a>0){if("top"!==e)return!1;t(new Seule(this),this)}else if(a<0){if("bottom"!==e)return!1;t(new Seule(this),this)}n=null,i=null},!1),this}HotKey(e,t){let n,i="",s={Arrow:"",Control:"ctrl"},o=e.replace(/\s/g,"");return this.Each(function(){this.addEventListener("keydown",function(e){i=(i+=e.key).replace(/Arrow|Control/gi,function(e){return s[e]}),(n=i.toLowerCase().indexOf(o.toLowerCase()))>-1&&(t(new Seule(this),this),i=""),setInterval(()=>i="",5e3)},!0)})}KeyLogger(){let e="",t=this.el,n={Arrow:"",Control:"ctrl"};return this.Each(function(){this.addEventListener("keydown",function(i){e=(e+=i.key).replace(/Arrow|Control/gi,function(e){return n[e]}),setInterval(()=>e="",1e4),Seule[t]=e},!0)})}Copy(e,t){let n=this.parrent.querySelector(e);return this.On(t.on,function(){let e=new MouseEvent(t.event,{view:window,bubbles:!0,cancelable:!0});n.dispatchEvent(e)})}Toggle(e,t){let n=!0;return this.On(e,function(e){if(!0===n)return t.handler(e),void(n=!1);t.callback(e),n=!0})}Scroll(e){let t=new Seule(this.Parent().selector);return e&&(t=new Seule(e)),"fixed"===t.getStyle("position").toLowerCase()?t.element[0].scrollTop=this.tags.offsetTop-10:window.scrollTo({top:this.tags.offsetTop}),this.tags}ScrollPosition(e){return e?this.tags.pageXOffset||this.tags.scrollLeft:this.tags.pageYOffset||this.tags.scrollTop}Delay(e,t){return this.Each(function(){setTimeout(e,t||1e3)})}Loop(e,t){return this.Each(function(){let n=setInterval(()=>{e(()=>clearInterval(n))},t||1e3)})}AddClass(e){return this.Each(function(){this.classList.add(e)})}RemoveClass(e){return this.Each(function(){this.classList.remove(e)})}ToggleClass(e){return this.Each(function(){this.classList.toggle(e)})}HasClass(e){return!!this.tags.className.match("(?:^|\\s)"+e+"(?!\\S)")}Style(e,t){return this.Each(function(){this.style[e]=t})}Css(e){return this.Each(function(){this.setAttribute("style",Seule.objectToStyle(e))})}GetStyle(e){return getComputedStyle(this.tags)[e]}ClassList(){let e=[];for(const t of this.tags.classList)e.push(t);return e}ClassListContains(e){return this.tags.classList.contains(e)}Show(){return this.Each(function(){"none"===getComputedStyle(this).display&&(this.style.display="inherit")})}Hide(){return this.Each(function(){this.style.display="none"})}Visible(e){return this.Each(function(){this.style.visibility=e?"hidden":"visible"})}IsVisible(){return"hidden"!==this.tags.style.visibility}Opacity(e){return this.Each(function(){this.style.opacity=e})}Anime(e){if(e){let t=Object.keys(e),n={},i={},s={},o={},r={},l="",a=e.text;for(const l of t){let t="duration property direction loop time delay text";"object"==typeof e[l]||t.includes(l)||(e[l]={value:e[l]});let a=e[l].delay||"0s",c=e[l].duration||e.duration||"0.7s";if(!t.includes(l)){let t=getComputedStyle(this.tags);n[l]=c+" "+a,i[l]=e[l].value||"inherit",o===r&&(o[l]=t[l]||"inherit"),s[l]=parseFloat(a.replace(/s/g,""))+parseFloat(c.replace(/s/g,""))}}i.transition=Seule.objectToStyle(n).replace(/:/g," ").replace(/;/g,", "),i["transition-timing-function"]=e.type||"ease",e.property&&(i["transition-property"]=e.property),e.duration&&(i["transition-duration"]=e.duration),e.delay&&(i["transition-delay"]=e.delay),o.transition=i.transition,o["transition-timing-function"]=i["transition-timing-function"],e.property&&(o["transition-property"]=i["transition-property"]),e.duration&&(o["transition-duration"]=i["transition-duration"]),e.delay&&(o["transition-delay"]=i["transition-delay"]),o===r&&(r=o);let c=Object.values(s);return s=1e3*Math.max(...c),this.Each(function(){if(l=this.innerText,e.text){let t=0,n="";e.text.delay&&(t=1e3*parseFloat(e.text.delay.replace(/s/g,""))),n=e.text.value?a=e.text.value:e.text,setTimeout(function(){this.innerText=n},t)}let t,n=this,r=1,c=e.timeOut||100,u=2*parseInt(s+c)+100;function d(s,c){n.setAttribute("style",Seule.objectToStyle(i)),e.text&&(n.innerText=a),setTimeout(()=>{n.setAttribute("style",Seule.objectToStyle(o)),e.text&&(n.innerText=l)},parseInt(s)),c&&c<=++r&&clearInterval(t)}e.direction||e.loop?(d(s+c),t=setInterval(function(){e.time?d(s+c,e.time):d(s+c)},u),e.direction&&clearInterval(t)):(n.setAttribute("style",Seule.objectToStyle(i)),e.text&&(n.innerText=a))})}return this.Each(function(){this.style.transition="all ease 0.7s"})}Width(e){return e?this.Each(function(){this.style.width=e}):getComputedStyle(this.tags).width}Height(e){return e?this.Each(function(){this.style.height=e}):getComputedStyle(this.tags).height}Text(e){return void 0===e?this.tags.innerText:this.Each(function(){this.innerText=e})}Val(e){return void 0===e?this.tags.value:this.Each(function(){this.value=e})}Attr(e,t){return t?this.Each(function(){this.setAttribute(e,t)}):this.tags.getAttribute(e)}AttrRemove(e){return this.Each(function(){this.removeAttribute(e)})}Html(e){return void 0===e?this.tags.innerHTML:this.Each(function(){this.innerHTML=e})}Append(e,t){return this.Each(function(){this.insertAdjacentHTML(Seule.HTMLPLACE("beforeend",t),e)})}InsertHtml(e,t){return this.Each(function(){this.insertAdjacentHTML(Seule.HTMLPLACE("afterend",t),e)})}Root(e){let t=decodeURI(window.location.href).split("?"),n={},i=new Seule(this.tags),s=i.Html(),o=[];t=t[1].split("&"),e&&(e=e.split("&"));for(let n of t){if(e)for(let t of e){let e=t.split("="),i=n.split("=");e[0]===i[0]&&(n=t)}o.push(String(n))}s.search("}}");for(let e of o)if(e.includes("=")){let t=e.split("=");for(n[t[0]]=t[1];s.includes("{{"+t[0]+"}}");)s=s.replace("{{"+t[0]+"}}","<seules class='str202109876"+t[0]+"'>"+t[1]+"</seules>")}i.Html(s);for(let e of o)if(e.includes("=")){let t=e.split("=");new Seule(".str202109876"+t[0]).text(t[1])}return this.cont=!1,n}Component(e,t){return Seule.PDO({component:!0,mode:t.mode,style:t.style||"",execute:t.execute||!1,data:t.data||[{}],child:t.child||!1,columns:t.columns||!1,nest:t.nest||!1,item:t.item||!1,action:t.action||!1,selector:e,query:e=>t.query?t.query(e):e,template:e=>t.template(e)||"",handler(e,n,i){t.handler&&t.handler(e,n,i)}}),this}Emit(e,t){let n=this.tags.querySelectorAll("*");return Seule.LOOP({data:n,handler(n){if(n.getAttribute("@"+e)){let i=n.getAttribute("@"+e),s="",o=new Seule(n),r=i,l="text val addClass removeClass toggleClass show hide visible opacity width height",a="css anime",c=e.replace(/^\w/,e=>e.toUpperCase());i.includes("{")&&(s=i.split("{"),r=(r="{"+s[1].slice(0,-1)+"}").replace(/[~']/g,'"').replace(/[~`]/g,'"'),r=l.includes(e)?s[1].slice(0,-1):JSON.parse(r)),s[0]?n.addEventListener(s[0],()=>{l.includes(e)||a.includes(e)?o[c](r):t(r,o,n)},!1):l.includes(e)||a.includes(e)?o[c](r):t(r,o,n)}}}),this}HtmlMethod(){let e=new Seule(this.children.el[1]),t=["anime","text","val","css","addClass","removeClass","toggleClass","show","hide","visible","opacity","width","height"];for(let n of t)e.Emit(n)}static async GET(e){let t=new FormData;if(e.param={method:e.method||"get"},"post"===e.method&&(e.param.body=t),e.form){let n=document.querySelector(e.form);t=new FormData(n),n.onsubmit=(async e=>e.preventDefault())}e.file&&("object"==typeof e.file?Seule.LOOP({data:e.file,handler:function(e){let n;n="object"==typeof e?e:document.querySelector(e),t.append(n.name,n.files[0])}}):(e.file=document.querySelector(e.file),t.append(e.file.name,e.file.files[0]))),e.data&&Object.keys(e.data).forEach(n=>t.append(n,e.data[n]));let n=await fetch(e.url,e.param);return n.ok?e.blob?await n.blob():e.json?await n.json():await n.text():"HTTP-Error: "+n.status}static async POST(e){return e.urls=e.url||"",e.datas=e.data||"",e.result=[],e.method="post","object"==typeof e.url?(Seule.LOOP({data:e.urls,handler(t){e.url=t,Seule.GET(e).then(function(t){e.result.push(t)})}}),e.result):"object"==typeof e.data?(Seule.LOOP({data:e.datas,handler(t){e.data=t,Seule.GET(e).then(function(t){e.result.push(t)})}}),e.result):await Seule.GET(e)}static STORE(e,t){if(t.data)window.localStorage.setItem(e,JSON.stringify(t.data));else{if("get"===t.execute)return JSON.parse(window.localStorage.getItem(e));"delete"===t.execute&&window.localStorage.removeItem(e),"delete All"===t.execute&&window.localStorage.clear()}return this}static LOOP(e){return"object"!=typeof e.data?Seule.GET({url:e.data,json:!0,method:"get"}).then(function(t){e.data=t,[].forEach.call(e.data,e.handler)}):[].forEach.call(e.data,e.handler),e}static HTMLPLACE(e,t){switch(!0){case"top"===t:e="afterbegin";break;case"before"===t:e="beforebegin";break;case null==t&&"afterend"===e:e="afterend";break;default:e="beforeend"}return e}static objectToUrlQuery(e){return("'"+Object.keys(e).map(t=>t+"="+e[t]).join("&")+"'").slice(1).slice(0,-1)}static objectToStyle(e){return Seule.objectToUrlQuery(e).replace(/&/g,";").replace(/=/g,":")}static AUDIO(e){let t={Delay:0};return t.Element=new Audio(e),t.Src=e,t.Play=function(e){return t.Delay=1e3*e,setTimeout(function(){t.Element.pause(),t.Element.play()},t.Delay),this},t.Stop=function(e){return setTimeout(function(){t.Element.pause(),t.Element.currentTime=0},1e3*e),this},t.Pause=function(e){return setTimeout(function(){t.Element.pause()},1e3*e),this},t}static DATE(e){let t={Increase:function(n,i){let s=new Date(e),o=new Date(s.setMonth(s.getMonth()+parseInt(i))),r=o.getMonth()+1;if(n)if("day"===n.toLowerCase()){let n=new Date(e);n.setDate(n.getDate()+parseInt(i)),t.current=n.getFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"-"+("0"+n.getDate()).slice(-2)}else r=s.getFullYear()+1,t.current=r+"-"+("0"+s.getMonth()).slice(-2)+"-"+("0"+s.getDate()).slice(-2);else t.current=o.getFullYear()+"-"+("0"+r).slice(-2)+"-"+("0"+o.getDate()).slice(-2);return t.res=t.current,this},BetWeen:function(e){let n=t.current||t.Increase("day",0).current,i=e.from.split(e.character||"-"),s=e.to.split(e.character||"-"),o=n.split(e.character||"-");return e.from=new Date(i[0],parseInt(i[1])-1,i[2]),e.to=new Date(s[0],parseInt(s[1])-1,s[2]),(n=new Date(o[0],parseInt(o[1])-1,o[2]))>e.from&&n<e.to?(e.handler&&e.handler(),t.res=!0,this):(e.callback&&e.callback(),t.res=!1,this)}};return t}static SCROLL(){let e={Top:function(){return window.scrollTo({top:0,behavior:"smooth"}),this},Bottom:function(){return window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),this}};return e}static ORIENTATION(){return"90"==screen.orientation.angle?"Horizontally":"Vertically"}static SCREEN(e,t){let n=window.matchMedia(e),i=s(n);function s(e){return e.matches&&("function"==typeof t.handler?t.handler():"function"==typeof t.callback&&t.callback()),e}return n.addEventListener("change",s),i}static SCENEHANDLER(e){return window.addEventListener("scroll",function(){!function(e){let t,n=document.querySelector(e.selector),i=e.unit||"percent",s=e.distance,o=window.innerHeight||document.documentElement.clientHeight,r=n.getBoundingClientRect().top,l=Math.round(r/o*100),a=Math.round(r);(t="percent"==i?l:a)<=s?e.handler():e.callback&&e.callback()}(e)},!1),this}static SCENE(e){let t=0;return Seule.SCENEHANDLER({selector:e.selector||"body",distance:e.distance||0,unit:e.unit||"percent",handler:()=>{0===t&&(e.handler(),t=1)},callback:()=>{1===t&&e.callback&&(e.callback(),t=0)}}),this}static PRINT(e){new Seule("body").Append('<iframe class="seule--frame" name="sframe" style="position: fixed; bottom: -100%"></iframe>');let t=document.getElementsByClassName("seule--frame")[0],n=t.contentWindow?t.contentWindow:t.contentDocument.document?t.contentDocument.document:t.contentDocument;n.document.open(),n.document.write("<html><head><title>DIV Contents</title>"),n.document.write("</head><body>"),n.document.write('<link href="'+e.css+'" rel="stylesheet" type="text/css" />'),n.document.write(e.html),n.document.write("</body></html>"),n.document.close(),setTimeout(function(){window.frames.sframe.focus(),window.frames.sframe.print()},500)}static PDO(e){e.query||(e.query=(e=>e));let t=[...e.data],n=[],i=[],s={},o=t=>{t.map(function(t){let n=t;if("object"==typeof e.columns&&"replace"===e.action.toLowerCase()&&(n[e.columns[1]]=n[e.columns[0]],delete n[e.columns[0]]),"drop"===e.action.toLowerCase())for(const t of e.columns)delete n[t];if("add"===e.action.toLowerCase())for(const t of e.columns)n.hasOwnProperty(t)||(n[t]="");return n})},r=t=>{let n=[];return e.group=[...new Set(t.reduce((t,n)=>t.concat(n[e.columns]),[]))],Seule.LOOP({data:e.group,handler(t,i){let s='{"'+e.columns+'":"'+t+'"}';n.push(JSON.parse(s))}}),n},l=t=>{if(e.columns){let n=new Set;return t.filter(t=>!n.has(t[e.columns])&&n.add(t[e.columns]))}let n=new Set(t.map(JSON.stringify));return Array.from(n).map(JSON.parse)},a=e=>e.reduce((e,t)=>Object.keys(t).reduce((e,n)=>(e[n]=(e[n]||0)+ +t[n],e),e),{}),c=t=>{return t.sort((()=>(t,n)=>t[e.columns]>n[e.columns]?1:t[e.columns]<n[e.columns]?-1:0)(e.columns))};switch(s.res=(()=>{let s=t.filter((t,n)=>("remove duplicates"===e.execute||e.columns||(t.index=n),e.child&&"insert"!==e.execute||"insert"===e.execute&&e.nest?t[e.child].some((t,n)=>e.query(t,n)):e.query(t,n)));if(e.child){for(const i of t)for(const t of i[e.child])"remove duplicates"!==e.execute&&(t.parent=i.index),n.push(t);i=n,n=n.filter((t,n)=>e.query(t,n))}return s})(),s.child=n,e.execute){case"update":let u=Object.keys(e.item)||{};s.res.forEach(t=>e.data.findIndex(n=>{if(n===t)for(const t of u)if(e.nest)for(const n of s.child)n[t]=e.item[t];else n[t]=e.item[t]}));break;case"delete":if(s.child.forEach(e=>i.splice(i.findIndex(t=>t===e),1)),e.nest){s.res.forEach(t=>t[e.child].findIndex(n=>{for(const i of s.child)n===i&&t[e.child].splice(t[e.child].findIndex(e=>e===i),1)})),s.res=e.data;break}s.res.forEach(t=>e.data.splice(e.data.findIndex(e=>e===t),1));break;case"insert":if(e.child)for(const t of s.res)"object"!=typeof t[e.child]&&(t[e.child]=[]),e.item.parent=t.index,e.data[t.index][e.child].push(e.item),i.push(e.item);else e.data.push(e.item);break;case"alter":e.nest?o(s.child):o(s.res);break;case"group by":s=e.nest?r(s.child):r(s.res);break;case"sum":s=e.nest?a(s.child):a(s.res);break;case"remove duplicates":s=e.nest?l(s.child):l(s.res);break;case"order by":s=e.nest?c(s.child):c(s.res)}if("select"!==e.execute&&(s.res=e.data,s.child=i),"order by"!==e.execute&&"sum"!==e.execute&&"group by"!==e.execute&&"remove duplicates"!==e.execute||(delete s.child,delete s.res),e.template){let t=s.res,n=[],i="",o={};s.res||(t=s),e.nest&&(t=s.child),"sum"===e.execute&&(n.push(t),t=n);for(const n of t)i+=e.template(n);if(e.component){class n extends HTMLElement{constructor(){super();const n=this.attachShadow({mode:e.mode||"open"});if(n.innerHTML=i,1===e.style.length){let t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e.style[0]),n.appendChild(t)}else{let t=document.createElement("style");t.textContent=e.style,n.appendChild(t)}e.handler&&e.handler(o,t,()=>{i="";for(const n of t)i+=e.template(n);n.innerHTML=i})}}customElements.define(e.selector,n),"closed"!==e.mode?(o=new Seule(e.selector)).Find=function(t){let n=document.querySelectorAll(e.selector),i=[];for(let e of n)i.push(new Seule(e.shadowRoot.querySelectorAll(t)));return 1===i.length&&(i=i[0]),i}:o.Find=(()=>console.log("mode is closed! to use find method, Switch to the open Mode!"))}else{let n=new Seule(e.selector);n.Html(i);let s=()=>{i="";for(const n of t)i+=e.template(n);n.Html(i)};e.handler&&e.handler(new Seule(e.selector),t,s)}}return s}}
