"use strict";function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!_instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Seule=function(){function e(t,n){_classCallCheck(this,e),this.check=!0,"document"===t?this.element=[document]:"window"===t?this.element=[window]:"object"===_typeof(t)?this.element=t:this.element=document.querySelectorAll(t),this.tags=this.element,this.tags.length&&(this.tags=this.element[0]),n&&(this.child=n),this.selector=t}return _createClass(e,[{key:"find",value:function(t){return"object"===_typeof(t)?new e(t):new e(this.selector+" "+t,!0)}},{key:"children",value:function(){return new e(this.selector+" > *",!0)}},{key:"el",value:function(t){return new e(this.selector+":nth-child("+t+")",!0)}},{key:"first",value:function(){return new e(this.selector+":first-child",!0)}},{key:"last",value:function(){return new e(this.selector+":last-child",!0)}},{key:"each",value:function(e){if(null==this.element.length)e.call(this.element);else{var t=!0,n=!1,i=void 0;try{for(var r,o=this.element[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;e.call(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}return this}},{key:"has",value:function(t,n){var i=[];Array.from(this.tags.children).filter(function(e){i.push(e.hasAttribute("@"+t))});e.loop({obj:i,handler:function(e,t){!0===e&&n(t)}})}},{key:"init",value:function(e,t){var n=this.tags;return this.has(e,function(i){var r=n.children[i].getAttribute("@"+e).split("{")[0];""===r&&t(i),n.children[i].addEventListener(r,function(){t(i)})}),this}},{key:"initStyle",value:function(e){var t=this.tags;return this.init(e,function(n){var i=t.children[n],r=i.getAttribute("@"+e).split("{");i.style[e]=r[1].slice(0,-1)}),this}},{key:"initDom",value:function(e){var t=this.tags;return this.init(e,function(n){var i=t.children[n],r=i.getAttribute("@"+e).split("{");i[e]=r[1].slice(0,-1)}),this}},{key:"domSetting",value:function(e){this.tags;var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this.initDom(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return this}},{key:"htmlSetting",value:function(e){this.tags;var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this.initStyle(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return this}},{key:"setHtmlMethod",value:function(e,t){var n=this.tags;return this.init(e,function(i){var r="{"+n.children[i].getAttribute("@"+e).split("{")[1].slice(0,-1)+"}";r=r.replace(/[~']/g,'"').replace(/[~`]/g,'"'),r=JSON.parse(r),t(r)}),this}},{key:"on",value:function(e,t){return this.each(function(){this.addEventListener(e,t,!1)})}},{key:"click",value:function(e){return this.on("click",e),this}},{key:"dblClick",value:function(e){return this.on("dblclick",e),this}},{key:"focus",value:function(e){return e?this.on("focus",e):this.tags.focus(),this}},{key:"blur",value:function(e){return e?this.on("blur",e):this.tags.blur(),this}},{key:"hold",value:function(e){var t=null,n="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,i=n?"touchstart":"mousedown",r=n?"touchend":"mouseup",o=n?"touchmove":"mousemove",a=0,u=0,l=10,s=10;function c(e){h(e);var i=e.target,o=parseInt(i.getAttribute("data-long-press-delay")||"1500",10);t=function(e,t){if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(e,t);var n=(new Date).getTime(),i={};return i.value=requestAnimFrame(function r(){(new Date).getTime()-n>=t?e.call():i.value=requestAnimFrame(r)}),i}(function(e){h();var t=n?e.touches[0].clientX:e.clientX,i=n?e.touches[0].clientY:e.clientY;this.dispatchEvent(new CustomEvent("long-press",{bubbles:!0,cancelable:!0,detail:{clientX:t,clientY:i}}))&&document.addEventListener(r,function e(t){document.removeEventListener(r,e,!0),function(e){e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation()}(t)},!0)}.bind(i,e),o)}function h(e){var n;(n=t)&&(window.cancelAnimationFrame?window.cancelAnimationFrame(n.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(n.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(n.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(n.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(n.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(n.value):clearTimeout(n)),t=null}return"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},window.CustomEvent.prototype=window.Event.prototype),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},document.addEventListener(r,h,!0),document.addEventListener(o,function(e){var t=Math.abs(a-e.clientX),n=Math.abs(u-e.clientY);(t>=l||n>=s)&&h()},!0),document.addEventListener("wheel",h,!0),document.addEventListener("scroll",h,!0),document.addEventListener(i,function(e){a=e.clientX,u=e.clientY,c(e)},!0),this.on("long-press",e),this}},{key:"swipe",value:function(e,t){var n,i,r=this.element;return r[0].addEventListener("touchstart",function(e){n=e.touches[0].clientX,i=e.touches[0].clientY},!1),r[0].addEventListener("touchmove",function(r){if(!n||!i)return;var o=r.touches[0].clientX,a=r.touches[0].clientY,u=n-o,l=i-a;if(Math.abs(u)>Math.abs(l)){if(u>0){if("left"!==e)return!1;t()}else if(u<0){if("right"!==e)return!1;t()}}else if(l>0){if("top"!==e)return!1;t()}else if(l<0){if("bottom"!==e)return!1;t()}n=null,i=null},!1),this}},{key:"hotKey",value:function(e,t,n){var i="",r={Arrow:"",Control:"ctrl"},o=e.replace(/\s/g,"");return this.each(function(){var e=this;n&&(e=window),e.addEventListener("keydown",function(e){i=(i+=e.key).replace(/Arrow|Control/gi,function(e){return r[e]}),i.toLowerCase().indexOf(o.toLowerCase())>-1&&(t(),i=""),setInterval(function(){return i=""},5e3)},!0)})}},{key:"emit",value:function(e){var t=document.querySelector(e.target);return this.on(e.event,function(){var n=new MouseEvent(e.emit,{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(n)}),this}},{key:"toggle",value:function(e){var t=!0;return this.on(e.event,function(){!0===t?(e.handler(),t=!1):(e.callback(),t=!0)}),this}},{key:"onScroll",value:function(e){return this.child?this.on("scroll",e):window.addEventListener("scroll",e),this}},{key:"scroll",value:function(e){return null==e&&(e="start"),this.tags.scrollIntoView({behavior:"smooth",block:e,inline:"nearest"}),this}},{key:"scrollPosition",value:function(e){var t=this.tags;return null==this.child&&(t=window),e?t.pageXOffset||t.scrollLeft:t.pageYOffset||t.scrollTop}},{key:"width",value:function(e){return e?this.each(function(){this.style.width=e}):getComputedStyle(this.tags).width}},{key:"height",value:function(e){return e?this.each(function(){this.style.height=e}):getComputedStyle(this.tags).height}},{key:"addClass",value:function(e){return this.each(function(){this.classList.add(e)})}},{key:"removeClass",value:function(e){return this.each(function(){this.classList.remove(e)})}},{key:"toggleClass",value:function(e){return this.each(function(){this.classList.toggle(e)})}},{key:"hasClass",value:function(e){if(this.tags.className.match("(?:^|\\s)"+e+"(?!\\S)"))return!0}},{key:"style",value:function(e,t){return this.each(function(){this.style[e]=t})}},{key:"css",value:function(t){var n=e.objectToStyle(t);return this.each(function(){this.setAttribute("style",n)})}},{key:"getStyle",value:function(e){return getComputedStyle(this[0])[e]}},{key:"classList",value:function(){for(var e=[],t=0;t<this.tags.classList.length;t++)e.push(this.tags.classList.item(t));return e}},{key:"classListContains",value:function(e){return this[0].classList.contains(e)}},{key:"show",value:function(){return this.each(function(){this.getAttribute("style").includes("display: none")?this.style.display="":this.style.display="inherit"})}},{key:"hide",value:function(){return this.each(function(){this.style.display="none"})}},{key:"visible",value:function(e){return this.each(function(){this.style.visibility=e?"hidden":"visible"})}},{key:"isVisible",value:function(){var e=!0;return"hidden"===this.tags.style.visibility&&(e=!1),e}},{key:"opacity",value:function(e){return this.each(function(){this.style.opacity=e})}},{key:"anime",value:function(t){for(var n=Object.keys(t),i=this.tags,r={},o={},a={},u={},l={},s=0,c=n;s<c.length;s++){var h=c[s],f=t[h].delay||"0s",d=t[h].duration||"0.1s";if("type"!=h&&"direction"!=h){var y=getComputedStyle(i);r[h]=d+" "+f,o[h]=t[h].value||"inherit",u===l&&(u[h]=y[h]||"inherit"),a[h]=parseFloat(f.replace(/s/g,""))+parseFloat(d.replace(/s/g,""))}}o.transition=e.objectToStyle(r).replace(/:/g," ").replace(/;/g,", "),o["transition-timing-function"]=t.type||"ease",u.transition=o.transition,u["transition-timing-function"]=o["transition-timing-function"],u===l&&(l=u);var v=Object.values(a);return a=1e3*Math.max.apply(Math,_toConsumableArray(v)),this.each(function(){var n=this,i=t.timeOut||100,r=2*parseInt(a+i)+100;if(t.direction||t.loop){s(a+i);var l=setInterval(function(){s(a+i)},r);t.direction&&clearInterval(l)}else n.setAttribute("style",e.objectToStyle(o));function s(t){n.setAttribute("style",e.objectToStyle(o)),setTimeout(function(){n.setAttribute("style",e.objectToStyle(u))},parseInt(t))}})}},{key:"text",value:function(e){return e||""===e?this.each(function(){this.innerText=e}):this.tags.innerText}},{key:"val",value:function(e){return e||""===e?this.each(function(){this.value=e}):this.tags.value}},{key:"attr",value:function(e,t){return t?this.each(function(){this.setAttribute(e,t)}):this.tags.getAttribute(e)}},{key:"html",value:function(e){return e||""===e?this.each(function(){this.innerHTML=e}):this.tags.innerHTML}},{key:"append",value:function(t,n){var i=e.hTmlplace("beforeend",n);return this.each(function(){this.insertAdjacentHTML(i,t)})}},{key:"insertHtml",value:function(t,n){var i=e.hTmlplace("afterend",n);return this.each(function(){this.insertAdjacentHTML(i,t)})}},{key:"load",value:function(t){var n=this.element;return e.get(t).then(function(e){var t=!0,i=!1,r=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.innerHTML=e}}catch(e){i=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw r}}})}}],[{key:"scrollTop",value:function(){return window.scrollTo({top:0,behavior:"smooth"}),this}},{key:"scrollBottom",value:function(){return window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),this}},{key:"orientation",value:function(){return"90"==screen.orientation.angle?"Horizontally":"Vertically"}},{key:"screen",value:function(e,t,n){var i=window.matchMedia(e),r=o(i);function o(e){return e.matches?"function"==typeof t&&t():"function"==typeof n&&n(),e}return i.addEventListener("change",o),r}},{key:"sceneHandler",value:function(e){return window.addEventListener("scroll",function(){!function(e){var t=document.querySelector(e.selector),n=e.unit||"percent",i=e.distance,r=window.innerHeight||document.documentElement.clientHeight,o=t.getBoundingClientRect().top,a=Math.round(o/r*100),u=Math.round(o);("percent"==n?a:u)<=i?e.handler():e.callback&&e.callback()}(e)},!1),this}},{key:"scene",value:function(t){var n=0;return e.sceneHandler({selector:t.selector||"body",distance:t.distance||0,unit:t.unit||"percent",handler:function(){0===n&&(t.handler(),n=1)},callback:function(){1===n&&t.callback&&(t.callback(),n=0)}}),this}},{key:"http",value:function(e){var t,n,i=new XMLHttpRequest;return e.data&&(n=this.objectToUrlQuery(e.data)),new Promise(function(r,o){i.open(e.method||"GET",e.url,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(n),i.onreadystatechange=function(){4==this.readyState&&200==this.status&&(e.json?(t=JSON.parse(this.responseText),r(t)):(t=this.responseText,r(t)))},i.onerror=function(){return o(i.statusText)},i.onloadend=function(){404==i.status&&r("broken link")}})}},{key:"get",value:function(t){return e.http({url:t})}},{key:"getJson",value:function(t){return e.http({url:t,json:!0})}},{key:"post",value:function(t,n){return e.http({url:t,method:"POST",data:n})}},{key:"storage",value:function(e,t){return window.localStorage.setItem(e,JSON.stringify(t)),this}},{key:"getStorage",value:function(e){return JSON.parse(window.localStorage.getItem(e))}},{key:"storageDelete",value:function(e){return window.localStorage.removeItem(e),this}},{key:"storageClear",value:function(){return window.localStorage.clear(),this}},{key:"loop",value:function(t){return"object"!==_typeof(t.obj)?e.getJson(t.obj).then(function(e){t.obj=e,[].forEach.call(t.obj,t.handler)}):[].forEach.call(t.obj,t.handler),t}},{key:"sortByProperty",value:function(e){return function(t,n){return t[e]>n[e]?1:t[e]<n[e]?-1:0}}},{key:"hTmlplace",value:function(e,t){switch(!0){case"top"===t:e="afterbegin";break;case"before"===t:e="beforebegin";break;case null==t&&"afterend"===e:e="afterend";break;default:e="beforeend"}return e}},{key:"objectToUrlQuery",value:function(e){return("'"+Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")+"'").slice(1).slice(0,-1)}},{key:"objectToStyle",value:function(t){return e.objectToUrlQuery(t).replace(/&/g,";").replace(/=/g,":")}},{key:"audioPlay",value:function(e,t){var n=new Audio(e);return this.delay=t,setTimeout(function(){n.pause(),n.play()},t),n}},{key:"audioPauseIn",value:function(e,t){return setTimeout(function(){e.pause(),e.currentTime=0},t+this.delay),this}},{key:"increaseDate",value:function(e){var t=new Date(e.date),n=new Date(t.setMonth(t.getMonth()+parseInt(e.step))),i=n.getMonth()+1;if(e.prefix){if("day"===e.prefix.toLowerCase()){var r=new Date(e.date);return r.setDate(r.getDate()+parseInt(e.step)),r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2)}return(i=t.getFullYear()+1)+"-"+("0"+t.getMonth()).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}return n.getFullYear()+"-"+("0"+i).slice(-2)+"-"+("0"+n.getDate()).slice(-2)}},{key:"ifDateBetween",value:function(e){var t=e.from.split(e.character||"/"),n=e.to.split(e.character||"/"),i=e.value.split(e.character||"/");return e.from=new Date(t[2],parseInt(t[1])-1,t[0]),e.to=new Date(n[2],parseInt(n[1])-1,n[0]),e.value=new Date(i[2],parseInt(i[1])-1,i[0]),e.value>e.from&&e.value<e.to?(e.handler&&e.handler(),!0):(e.callback&&e.callback(),!1)}},{key:"select",value:function(e){var t=_toConsumableArray(e.obj);return e.column?t.filter(function(t){return e.query.indexOf(t[e.column])>=0}):e.handler?t.filter(function(t){return e.handler(t)}):t.filter(function(t){for(var n in t)if(JSON.stringify(t[n]).toString().toLowerCase().indexOf(e.query.toString().toLowerCase())>-1)return t})}},{key:"delete",value:function(t){return e.select({obj:t.obj,handler:function(e){return t.handler(e)}}).forEach(function(e){return t.obj.splice(t.obj.findIndex(function(t){return t===e}),1)}),t.obj}},{key:"insert",value:function(e){return e.obj.push(e.item),this}},{key:"update",value:function(t){var n=e.select({obj:t.obj,handler:function(e){return t.handler(e)}}),i=Object.keys(t.item);return n.forEach(function(e){return t.obj.findIndex(function(n){if(n===e){var r=!0,o=!1,a=void 0;try{for(var u,l=i[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var s=u.value;n[s]=t.item[s]}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}})}),t.obj}},{key:"alter",value:function(e){return e.obj.map(function(t){var n=t;if(null==e.columns){var i=e.query.split(" ");n[i[4]]=n[i[2]],delete n[i[2]]}if("drop"===e.query.toLowerCase())for(var r=0;r<e.columns.length;r++)delete n[e.columns[r]];if("add"===e.query.toLowerCase())for(var o=0;o<e.columns.length;o++)n.hasOwnProperty(e.columns[o])||(n[e.columns[o]]="");return n})}},{key:"group",value:function(e){return e.group=_toConsumableArray(new Set(e.obj.reduce(function(t,n){return t.concat(n[e.property])},[]))),e.handler&&[].forEach.call(e.group,e.handler),e.group}},{key:"nest",value:function(e){return e.obj.filter(function(t){if(t[e.child]&&"object"==_typeof(t[e.child]))return t[e.child].some(function(t){return e.handler(t)})})}},{key:"sum",value:function(t){var n=t.obj;return t.handler&&(n=e.select({obj:t.obj,handler:function(e){return t.handler(e)}})),n.reduce(function(e,t){return Object.keys(t).reduce(function(e,n){return"id"===n||(e[n]=(e[n]||0)+ +t[n]),e},e)},{})}},{key:"sumNest",value:function(t){var n=[],i=e.nest({obj:t.obj,child:t.child,handler:function(e){n.push(e)}});return i=n,t.handler&&(i=e.select({obj:n,handler:function(e){return t.handler(e)}})),e.sum({obj:i})}},{key:"fetch",value:function(t){var n=document.querySelectorAll(t.selector),i=e.select({obj:t.obj,handler:function(e){return t.filter(e)}}),r="";e.loop({obj:i,handler:function(e,n){r+=t.html(e,n)}});var o=!0,a=!1,u=void 0;try{for(var l,s=n[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){l.value.innerHTML=r}}catch(e){a=!0,u=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw u}}}}]),e}();